# Application Name
spring.application.name=workflow-core-engine
application.version=2.0.0

# Server Configuration
server.port=8080
server.servlet.context-path=/

# Logging Configuration
logging.level.root=INFO
logging.level.workflow.core.engine=DEBUG
logging.level.liquibase=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Jackson Configuration
spring.jackson.serialization.indent-output=true
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.default-property-inclusion=non_null

# Liquibase Configuration
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.yaml
spring.liquibase.default-schema=public

# JPA / Hibernate Configuration
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.open-in-view=false

# H2 Database Configuration (Development)
spring.datasource.url=jdbc:h2:mem:workflowdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Connection Pool
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# Workflow Engine Configuration (v2)
workflow.engine.max-execution-time-ms=300000
workflow.engine.max-nodes-per-workflow=1000
workflow.engine.enable-async=true
workflow.engine.lock-timeout-seconds=300
workflow.engine.retry-max-attempts=3
workflow.engine.retry-backoff-ms=1000

# Workflow Persistence (v2 Feature Flag)
workflow.persistence.enabled=true
workflow.persistence.audit.enabled=true

# Multi-Tenant Configuration (v2)
workflow.multitenancy.enabled=true
workflow.multitenancy.default-tenant=default
workflow.multitenancy.isolation-strategy=LOGICAL

# Actuator Configuration (Monitoring)
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.tags.application=${spring.application.name}
management.metrics.tags.version=${application.version}
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# Prometheus Metrics
management.prometheus.metrics.export.enabled=true
